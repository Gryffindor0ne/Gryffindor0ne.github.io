---
layout: post
title: "React Image Upload (feat.Firebase)"
date: 2022-09-12 13:20:00 +0900
category: dev-log
tags: dev-log
image:
  path: https://images.unsplash.com/photo-1508802551395-fbecf2af43b1?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1212&q=80
---

# React Image Upload (feat.Firebase)

## Reactì—ì„œ ì´ë¯¸ì§€ ì—…ë¡œë“œí•˜ëŠ” ë°©ë²• (feat.Firebase)

í”„ë¡œì íŠ¸ ë¦¬íŒ©í† ë§í•˜ëŠ” ê³¼ì •ì—ì„œ ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ë ¤ê³  ì°¾ì•„ë³´ë‹¤ê°€ Firebaseë¥¼ í†µí•œ ì´ë¯¸ì§€ ì—…ë¡œë“œ ë° ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥ êµ¬í˜„ì— ëŒ€í•´ ì•Œê²Œ ë˜ì–´ ê³µìœ í•˜ê³ ì ê¸€ì„ ì ëŠ”ë‹¤.

ì´ì „ í”„ë¡œì íŠ¸ì—ì„œ AWS S3ë¥¼ ì´ìš©í•˜ì—¬ ì´ë¯¸ì§€ ì—…ë¡œë“œë¥¼ êµ¬í˜„í•œ ì ì´ ìˆëŠ”ë° ê·¸ ë°©ë²•ê³¼ ìœ ì‚¬í•œ ì ì´ ë§ì´ ìˆì—ˆë‹¤. ë¹„êµí•´ë³´ë©´ì„œ ê³µë¶€í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.

---

### Firebase ì„¤ì •

ë¨¼ì € Firebaseë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” Google ê³„ì •ì´ ìˆì–´ì•¼ í•œë‹¤. êµ¬ê¸€ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•œ í›„ Firebase console í˜ì´ì§€ë¡œ ë“¤ì–´ê°€ë©´ ë‹¤ìŒê³¼ ê°™ì€ í˜ì´ì§€ê°€ ë‚˜ì˜¨ë‹¤.

![111](https://user-images.githubusercontent.com/79234473/189578275-c39d1282-aa60-4684-a465-603c8e61f087.png)

í˜„ì¬ 1ê°œì˜ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ì—¬ ì‚¬ìš©ì¤‘ì´ë¼ì„œ essay-noteë¼ëŠ” í”„ë¡œì íŠ¸ í•˜ë‚˜ê°€ ë³´ì—¬ì§€ê³  ìˆëŠ”ë° ì²˜ìŒ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë¼ë©´ ì•„ë¬´ ê²ƒë„ ë‚˜íƒ€ë‚˜ì§€ ì•ŠëŠ”ë‹¤.

ì´ë¯¸ì§€ ì—…ë¡œë“œë¥¼ í•˜ê¸° ìœ„í•´ì„œëŠ” ë¨¼ì € í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•´ì•¼í•œë‹¤. '+ í”„ë¡œì íŠ¸ ì¶”ê°€' ë¶€ë¶„ì„ í´ë¦­í•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•´ë³´ì.

![222](https://user-images.githubusercontent.com/79234473/189578946-228209f8-856a-458d-ae99-e191a99dd645.png)

í”„ë¡œì íŠ¸ ì´ë¦„ì„ ì…ë ¥í•˜ê³  ì•½ê´€ì— ë™ì˜í•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•œë‹¤. ì—¬ê¸°ì„œ ì˜ˆì‹œë¡œ Photo-islandë¼ëŠ” ì´ë¦„ì˜ í”„ë¡œì íŠ¸ë¥¼ í•˜ë‚˜ ìƒì„±í–ˆë‹¤.

![44](https://user-images.githubusercontent.com/79234473/189580072-f1603da1-f2e0-4a02-94ce-88ffea5d3bb8.png)

![55](https://user-images.githubusercontent.com/79234473/189580063-2ad4ee4e-0937-4450-97db-f641952c41fc.png)

ëª¨ë“  ë‹¨ê³„ê°€ ì™„ë£Œë˜ì—ˆë‹¤. ê³„ì†ì„ ëˆ„ë¥´ë©´ ìƒì„±í•œ í”„ë¡œì íŠ¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰ì…˜ëœë‹¤.

![66](https://user-images.githubusercontent.com/79234473/189580338-57eb89f1-0e84-4e56-b0a5-298d20485936.png)

ì ì´ì œ Photo-islandë¼ëŠ” í”„ë¡œì íŠ¸ê°€ ìƒì„±ë˜ì—ˆë‹¤.

ë‹¤ìŒìœ¼ë¡œ ì§„í–‰í•  ê²ƒì€ ì™¼ìª½ ì‚¬ì´ë“œë°”ì˜ 'ë¹Œë“œ' ë©”ë‰´ë¥¼ í´ë¦­í•˜ì—¬ 'storage' ë©”ë‰´ë¡œ ë“¤ì–´ê°„ë‹¤.

![1212](https://user-images.githubusercontent.com/79234473/189580983-74eb348a-394b-4fc6-b72f-c16734aede2b.png)

ì‹œì‘í•˜ê¸° ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ Cloud Storage ì„¤ì • ë¶€ë¶„ì´ ë‚˜ì˜¤ëŠ”ë° ì—¬ê¸°ì„œëŠ” í…ŒìŠ¤íŠ¸ëª¨ë“œë¥¼ í´ë¦­í•˜ê³  ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°„ë‹¤.

![2323](https://user-images.githubusercontent.com/79234473/189580977-786ab7b6-cac2-4dff-9453-06c728e64027.png)

Cloud Storage ìœ„ì¹˜ ì„¤ì •ê¹Œì§€ ì™„ë£Œí•˜ë©´ ë²„í‚·ì„ ìƒì„±í•œë‹¤.

![3434](https://user-images.githubusercontent.com/79234473/189580970-1978141b-3c26-4019-b25d-1ff7c3bb7df5.png)

ëª¨ë“  ë‹¨ê³„ê°€ ì™„ë£Œë˜ë©´ ë¹ˆ ìŠ¤í† ë¦¬ì§€ ë²„í‚·ì´ ìƒì„±ëœë‹¤.

![555](https://user-images.githubusercontent.com/79234473/189581267-72740958-290b-4ccd-b381-018a51ea8477.png)

---

### Reactì™€ Firebase ì—°ê²°

ê·¸ëŸ¼ React ì•±ì—ì„œ Firebaseë¥¼ ì—°ê²°í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•´ë³´ì.

í˜„ì¬ ì§„í–‰ì¤‘ì¸ React ì•±ì´ ìˆìœ¼ë©´ ë°”ë¡œ ì‚¬ìš©í•˜ë©´ ë˜ê³ , ì—†ë‹¤ë©´ ìƒˆë¡œ React ì•±ì„ ìƒì„±í•˜ì—¬ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

í•´ë‹¹ í”„ë¡œì íŠ¸ í´ë”ë¡œ ë“¤ì–´ê°€ì„œ ë¨¼ì € Firebase ì„¤ì¹˜ë¥¼ í•´ì¤€ë‹¤.

```
npm i firebase
```

Firebaseë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ í•´ë‹¹ í”„ë¡œì íŠ¸ë¥¼ ì—°ê²°í•´ì•¼ í•œë‹¤.

![3232](https://user-images.githubusercontent.com/79234473/189584477-ec57f5c1-a3c3-4bda-980b-438ce9bd50be.png)

ìƒˆë¡œ ìƒì„±í•œ í”„ë¡œì íŠ¸ë¡œ ë“¤ì–´ê°€ì„œ ì›¹ ì•„ì´ì½˜ì„ í´ë¦­í•˜ì—¬ ì›¹ìš© Firebase í”„ë¡œì íŠ¸ë¥¼ ë§Œë“ ë‹¤.

![132312](https://user-images.githubusercontent.com/79234473/189585041-df3837df-190b-4d55-83e1-9a878ec194b9.png)

ì•±ì˜ ì´ë¦„ì„ ì§€ì •í•˜ê³  ì•±ì„ ë“±ë¡í•©ë‹ˆë‹¤.

![234124](https://user-images.githubusercontent.com/79234473/189585491-20f13ae9-2c94-4976-bcf8-b065fc528166.png)

<br>

ë‹¤ìŒ ë‹¨ê³„ë¡œ ì´ë™í•˜ë©´ firebaseConfig ê°ì²´ê°€ í‘œì‹œëœë‹¤. ì¶”í›„ Firebaseë¥¼ ì´ˆê¸°í™”í•˜ëŠ” ë° í•„ìš”í•˜ë¯€ë¡œ firebaseConfig ê°ì²´ë¥¼ í´ë¦½ë³´ë“œì— ë³µì‚¬í•´ë‘”ë‹¤. ê·¸ëŸ° ë‹¤ìŒ ì½˜ì†”ë¡œ ê³„ì† ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ í”„ë¡œì„¸ìŠ¤ë¥¼ ì™„ë£Œí•œë‹¤.
(firebaseConfig ê°ì²´ëŠ” í”„ë¡œì íŠ¸ ì„¤ì •ì— ë“¤ì–´ê°€ë©´ ë‹¤ì‹œ ë³¼ ìˆ˜ ìˆì–´ ê¼­ ë³µì‚¬í•´ë‘ì§€ ì•Šì•„ë„ ëœë‹¤.)

<br>

ì, ê·¸ëŸ¼ Reactì—ì„œ Firebaseë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•´ë³´ì.

src í´ë”ì— firebase.js íŒŒì¼ì„ ë§Œë“¤ê³  ë‹¤ìŒ ì½”ë“œë¥¼ ì¶”ê°€í•œë‹¤. (íŒŒì¼ êµ¬ì¡°ëŠ” ê°ì ì•Œì•„ì„œ~ ë‚´ í”„ë¡œì íŠ¸ì—ì„œëŠ” apis í´ë” ìƒì„±í›„ ê·¸ ì•ˆì— firebase.js íŒŒì¼ì„ ìƒì„±í–ˆë‹¤.)

![code](https://user-images.githubusercontent.com/79234473/189589120-0416040a-0947-4c2d-9984-ddf4f3866bb2.png)

ê·¸ë¦¬ê³  .env íŒŒì¼ ìƒì„±í•˜ì—¬ React í™˜ê²½ë³€ìˆ˜ ì„¤ì •ì„ firebaseConfig ê°ì²´ ë‚´ìš©ìœ¼ë¡œ í•´ì£¼ë©´ ëœë‹¤.

```
// .env

REACT_APP_FIREBASE_API_KEY= ...
REACT_APP_FIREBASE_AUTH_DOMAIN= ...
REACT_APP_FIREBASE_PROJECT_ID= ...
REACT_APP_FIREBASE_STORAGE_BUCKET= ...
REACT_APP_FIREBASE_MESSAGING_SENDER_ID= ...
REACT_APP_FIREBASE_APP_ID= ...
REACT_APP_FIREBASE_MEASUREMENT_ID= ...
```

---

### Firebase ì‚¬ìš©í•œ ì´ë¯¸ì§€ ì—…ë¡œë“œ ë° ë¯¸ë¦¬ë³´ê¸° êµ¬í˜„

Firebase storageì— ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ê¸° ìœ„í•´ì„œëŠ” uploadBytes í˜¹ì€ uploadBytesResumable í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ”ë° ë‘˜ë‹¤ ë™ì¼í•œ ê²°ê³¼ë¥¼ ì–»ì§€ë§Œ uploadBytesResumable í•¨ìˆ˜ëŠ” ì—…ë¡œë“œ ì§„í–‰ìƒí™©ì„ ì²´í¬í•˜ê³  ì¼ì‹œì¤‘ì‹œ, ì·¨ì†Œ ê°™ì€ íŠ¹ì • ì‘ì—…ì„ í•  ìˆ˜ ìˆë‹¤.

ì¼ë‹¨ uploadBytes í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì˜ˆì‹œë¥¼ ë³´ì.

> ì°¸ê³ ì‚¬í•­ : ì§„í–‰í•˜ë˜ í”„ë¡œì íŠ¸ëŠ” Typescriptë¡œ ì‘ì„±ë˜ì—ˆìœ¼ë©°, ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ì„ í•  ì»´í¬ë„ŒíŠ¸ë¥¼ ë”°ë¡œ ìƒì„±í•˜ì—¬ ì§„í–‰í•˜ì˜€ë‹¤.

<br>

âœ¨ UploadImage.tsx

![code1](https://user-images.githubusercontent.com/79234473/189645602-2fe80507-825d-4b4b-bc86-292fdc1f0c98.png)

<br>
ë¨¼ì € ìœ„ì˜ ì½”ë“œë¥¼ ì¶”ê°€í•œë‹¤.

<br>

ê·¸ë¦¬ê³ , ë‹¤ìŒì˜ ì½”ë“œë¥¼ ì…ë ¥í•˜ì—¬ ì´ë¯¸ì§€ ì—…ë¡œë“œë¥¼ êµ¬í˜„í•œë‹¤.

![code2](https://user-images.githubusercontent.com/79234473/189648464-4350d349-6a92-4d33-86cc-e5f32541e3aa.png)

refí•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ë ¤ëŠ” Firebase storageì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ë§Œë“ ë‹¤.
`files/${file[0].name}` ëŠ” Firebase storageì— filesì´ë€ í´ë”ë¥¼ ë§Œë“¤ê³  ê·¸ ì•ˆì— ì—…ë¡œë“œí•  ì´ë¯¸ì§€ì˜ ì´ë¦„ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ì €ì¥í•œë‹¤ëŠ” ì˜ë¯¸.

uploadBytes í•¨ìˆ˜ëŠ” refë¡œ ë§Œë“  ì°¸ì¡°ì™€ í•´ë‹¹ íŒŒì¼ì„ ë§¤ê°œë³€ìˆ˜ë¡œ í•˜ì—¬ íŒŒì¼ì„ ì—…ë¡œë“œí•œë‹¤.
ì—…ë¡œë“œê°€ ì™„ë£Œë˜ë©´ getDownloadURL í•¨ìˆ˜ëŠ” ì—…ë¡œë“œëœ íŒŒì¼ì˜ URLì„ ë‹¤ìš´ë¡œë“œí•œë‹¤.
getDownloadURL í•¨ìˆ˜ë¡œ ë°›ì€ ì´ë¯¸ì§€ URLì„ ì´ìš©í•˜ì—¬ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥ì„ êµ¬í˜„í•œë‹¤.

<br>

---

ì´ë¯¸ì§€ ì—…ë¡œë“œì‹œ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì§„í–‰ì‚¬í•­ì„ í™•ì¸í•˜ê³  ë¯¸ë¦¬ë³´ê¸°ê¹Œì§€ ë³´ì—¬ì§€ê²Œ í•˜ê³  ì‹¶ë‹¤ë©´ uploadBytesResumable í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

![code3](https://user-images.githubusercontent.com/79234473/189650495-da87205c-0205-4578-88ee-13cef9228943.png)

<br>

> ì´ë¯¸ì§€ ì—…ë¡œë“œ ì§„í–‰ ê³¼ì •

<br>

![214112](https://user-images.githubusercontent.com/79234473/189652261-77abf9d6-1bf0-4280-9026-669def6dfdf1.png)

<br>

![1241245245](https://user-images.githubusercontent.com/79234473/189652264-68cfba90-ab56-4e47-876e-9f84411a6624.png)

<br>

![qweqw](https://user-images.githubusercontent.com/79234473/189652440-749b0dc2-f21c-43b7-8989-9bb595406ca2.png)

<br>

ğŸ–¥ progress bar ë””ìì¸ì€ Material UI, ì „ì²´ ë””ìì¸ì€ styled-component ì‚¬ìš©.
